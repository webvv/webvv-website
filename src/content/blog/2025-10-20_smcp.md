---
title: 'SMCP (Structured Model Context Protocol)'
description: 'Model Context Protocol (MCP) is a standard protocol to enable LLMs and AI applications access external context, tools and data.'
author: 'Sahand Javid'
publishDate: '2025-10-20'
---

## MCP

Model Context Protocol (MCP) is a standard protocol to enable LLMs and AI applications access external context, tools and data.

MCP separates responsibilities: one team builds and maintains MCP servers (the resources, data connectors, and tool endpoints), while a different team builds MCP clients (the LLM integrations and UI/agent logic) that consume those server capabilities. This clean separation lets each team work independently.

We definitely need teams to create and maintain different MCP servers. The question is can we have a general agent implementation to handle any MCP server and context? This is what SMCP is aiming for.

## SMCP

SMCP is an structured MCP. By adding some default tools and prompt handlers, we may be able to automate more, and come up with general agents who can work for most context out of the box.

As long as your MCP server is an SMCP server, we probably could come up with one agent implementation who:
- can ask for MCP resources autonomously.
- can ask for MCP prompt handlers autonomously.
- can communicate to other agents autonomously.

SMCP provides:
- Privacy of agents.
- Improve context rot.
- Monitoring and tracing agents communications effectively.
- [Future versions] Agent discovery.

Big goals! Lets see how we can do this:

## Opinionated MCP Servers

SMCP servers are MCP servers with some meta **tools**, **Prompt Handlers** and **Resources**.

### Meta Tools

- ```_getMCPResource()``` tool receives one parameter which is a resource id and returns the resource.
- ```_getMCPResourceTemplate()```
- ```_getMCPPromptHandler()```

### Meta Resources

- ```/_meta/version``` returns 0.1 which is the version of current spec.

### Meta Prompt Handlers

- ```_init_smcp``` instruction and system message to teaches llm how to communicate in SMCP. For version *0.1* this will be a fixed text.

## Agent communicating in SMCP

When SMCP Agent is started with list of MCP servers and an llm model, it first:

1. fetches all tools, resources and prompt handlers of each MCP server it is being connected at.

2. It detects which MCP servers are SMCP aware.
3. compares all SMCP ```_init_smcp``` prompt templates. For version *0.1* if ```_init_smcp``` prompt templates are different stops the agent with error.
4. instantiate connection to LLM with all tools.

When agent receives a prompt message:

1. Include Prompt Template to the instruction or system message.
2. Add the prompt message and send to the LLM.

Agent may receive back 3 types of messages:

- **Answer**: We have 2 types of messages (explained in `_init_smcp`)
	- ```@CERTAIN```: llm has a ready to send back to user.
	- ```@UNCERTAIN```: llm does not know the answer or how to answer.
	- ```@CLARIFY```: llm asks for clarifications.
- **Tool Call**: which can be divided in 2:
	- ```#MCP_TOOL``` ask to call any tool on the MCP server. It includes ```_getMCPResource()```, ```_getMCPResourceTemplate()```, ```_getMCPPromptHandler()``` and any regular MCP tools.
	- ```#ASK_AGENT```: prompt another agent with some message. We donâ€™t send all the first agent context window. llm decides what to send.
